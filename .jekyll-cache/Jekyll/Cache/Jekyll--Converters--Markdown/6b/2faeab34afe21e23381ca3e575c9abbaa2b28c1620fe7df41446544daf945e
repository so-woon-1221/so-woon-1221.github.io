I"š/<h2 id="1-í™”ë©´-êµ¬ì„±">1. í™”ë©´ êµ¬ì„±</h2>

<p><img src="/assets/image/shoppingmall-infopage.png" alt="UI" /></p>

<p>ê¸°ë³¸ì ì¸ í™”ë©´ êµ¬ì„±ì´ë‹¤. <br />
ìƒë‹¨ì—ëŠ” í—¤ë”ê°€ ì¡´ì¬í•˜ë©° ë¯¸ì™„ì„±ëœ ìƒíƒœì´ê¸´ í•˜ì§€ë§Œ ë©”ì¸í˜ì´ì§€ë¡œ ì´ë™ ê°€ëŠ¥í•œ ë¡œê³ ì™€ <br />
ì¹´í…Œê³ ë¦¬ ë©”ë‰´, ê²€ìƒ‰ì°½, ë¡œê·¸ì¸ ë²„íŠ¼ì´ ìˆë‹¤. <br />
í•˜ë‹¨ì—ëŠ” ëŒ€í‘œì´ë¯¸ì§€ë¡œ ì„¤ì •í•œ ì´ë¯¸ì§€ì™€ ìƒí’ˆ ì´ë¦„, ê°€ê²©, íƒœê·¸ê°€ í‘œì‹œëœë‹¤. <br />
êµ¬ë§¤ì™€ ì¥ë°”êµ¬ë‹ˆ ë²„íŠ¼ì´ ì¡´ì¬í•˜ ê·¸ í•˜ë‹¨ì—” ìƒì„¸ì„¤ëª…ì´ ë‚˜ì˜¤ê²Œ ëœë‹¤.</p>

<h2 id="2-ìƒì„¸-ì„¤ëª…">2. ìƒì„¸ ì„¤ëª…</h2>

<ul>
  <li>/modules/item.js
```react
import { createAction, handleActions } from â€˜redux-actionsâ€™;
import createRequestSaga, {
createRequestActionTypes,
} from â€˜../lib/createRequestSagaâ€™;
import * as itemAPI from â€˜../lib/api/itemsâ€™;
import { takeLatest } from â€˜redux-saga/effectsâ€™;</li>
</ul>

<p>const [
  READ_ITEM,
  READ_ITEM_SUCCESS,
  READ_ITEM_FAILURE,
] = createRequestActionTypes(â€˜item/READ_ITEMâ€™);</p>

<p>const UNLOAD_ITEM = â€˜item/UNLOAD_ITEMâ€™;</p>

<p>export const readItem = createAction(READ_ITEM, (id) =&gt; id);
export const unloadPost = createAction(UNLOAD_ITEM);</p>

<p>const readItemSaga = createRequestSaga(READ_ITEM, itemAPI.readItem);
export function* readSaga() {
  yield takeLatest(READ_ITEM, readItemSaga);
}</p>

<p>const initialState = {
  item: null,
  error: null,
};</p>

<p>const item = handleActions(
  {
    [READ_ITEM]: (state) =&gt; ({
      â€¦state,
      item: null,
      error: null,
    }),
    [READ_ITEM_SUCCESS]: (state, { payload: item }) =&gt; ({
      â€¦state,
      item,
    }),
    [READ_ITEM_FAILURE]: (state, { payload: error }) =&gt; ({
      â€¦state,
      error,
    }),
    [UNLOAD_ITEM]: () =&gt; initialState,
  },
  initialState,
);</p>

<p>export default item;</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
`READ_ITEM` acitonì´ ì‹¤í–‰ë˜ë©´ ìƒí’ˆì˜ ì•„ì´ë””ë¥¼ í™œìš©í•´ ì„œë²„ì—ì„œ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤.

- /container/ItemViewerContainer.js
``` react
import React, { useEffect } from 'react';
import { useDispatch, useSelector } from 'react-redux';
import { withRouter } from 'react-router-dom';
import { readItem, unloadPost } from '../../modules/item';
import ItemViewer from '../../components/viewer/ItemViewer';

const ItemViewerContainer = ({ match }) =&gt; {
  const { itemId } = match.params;
  const dispatch = useDispatch();
  const { item, error, loading, user } = useSelector(
    ({ item, loading, login }) =&gt; ({
      item: item.item,
      error: item.error,
      loading: loading['item/READ_ITEM'],
      user: login.user,
    }),
  );

  useEffect(() =&gt; {
    dispatch(readItem(itemId));
    console.log(item);
    return () =&gt; {
      dispatch(unloadPost());
    };
  }, [dispatch, itemId]);

  if (item === '') {
    return &lt;div&gt;ì˜¤ë¥˜&lt;/div&gt;;
  }
  return (
    &lt;&gt;
      &lt;ItemViewer item={item} error={error} loading={loading} onCart={onCart} /&gt;
    &lt;/&gt;
  );
};

export default withRouter(ItemViewerContainer);
</code></pre></div></div>
<p>ìƒì„¸í˜ì´ì§€ì˜ ì ‘ì† ì£¼ì†Œ í˜•íƒœëŠ” <code class="language-plaintext highlighter-rouge">~/item/{itemid}</code>í˜•ì‹ì´ë‹¤. ë”°ë¼ì„œ ì—¬ê¸°ì„œ ê° ì œí’ˆì˜ ì•„ì´ë””ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë‹¤.</p>
<div class="language-react highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">readItem</span> <span class="o">=</span> <span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">client</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s2">`/api/item/</span><span class="p">${</span><span class="nx">id</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
</code></pre></div></div>
<p>ì„œë²„ì— ì ‘ê·¼í•˜ëŠ” apiì˜ ì„¤ì •ì´ ì´ë ‡ê²Œ ë˜ì–´ìˆìœ¼ë¯€ë¡œ idë¥¼ ì½ì–´ì„œ</p>
<div class="language-react highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">itemId</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">match</span><span class="p">.</span><span class="nx">params</span><span class="p">;</span>
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">itemId</code>ì— ì €ì¥í•˜ê³ </p>
<div class="language-react highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">dispatch</span><span class="p">(</span><span class="nx">readItem</span><span class="p">(</span><span class="nx">itemId</span><span class="p">));</span>
</code></pre></div></div>
<p>ì´ê²ƒì„ í™œìš©í•´ì„œ <code class="language-plaintext highlighter-rouge">readItem</code> ì•¡ì…˜ì„ dispatchí•œë‹¤. <br />
ê·¸ë¦¬ê³  ì–»ê²Œëœ itemì •ë³´ë¥¼ ItemViewerì— ì „ë‹¬í•´ì¤€ë‹¤.</p>

<ul>
  <li>/components/viewer/ItemViewer.js
    <div class="language-react highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">...</span>
<span class="kd">const</span> <span class="nx">ItemViewer</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">item</span><span class="p">,</span> <span class="nx">error</span><span class="p">,</span> <span class="nx">loading</span><span class="p">,</span> <span class="nx">onCart</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">response</span> <span class="o">&amp;&amp;</span> <span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">404</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">&lt;</span><span class="nc">ItemHeaderBlock</span><span class="p">&gt;</span>ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì•„ì´í…œì…ë‹ˆë‹¤.<span class="p">&lt;/</span><span class="nc">ItemHeaderBlock</span><span class="p">&gt;;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="p">&lt;</span><span class="nc">ItemHeaderBlock</span><span class="p">&gt;</span>ì˜¤ë¥˜<span class="p">&lt;/</span><span class="nc">ItemHeaderBlock</span><span class="p">&gt;;</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">loading</span> <span class="o">||</span> <span class="o">!</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="p">{</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">content</span><span class="p">,</span> <span class="nx">price</span><span class="p">,</span> <span class="nx">tags</span><span class="p">,</span> <span class="nx">thumbnail</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">item</span><span class="p">;</span>

<span class="k">return</span> <span class="p">(</span>
  <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nc">ItemHeaderBlock</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">ItemHeaderWrapper</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nc">ItemImage</span> <span class="na">src</span><span class="p">=</span><span class="si">{</span><span class="nx">thumbnail</span><span class="si">}</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nc">Blank</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nc">ItemHeader</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">name</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nc">SubInfo</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">b</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">price</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">b</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nc">SubInfo</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nc">Tags</span><span class="p">&gt;</span>
            <span class="si">{</span><span class="nx">tags</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">tag</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
              <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="p">=</span><span class="si">{</span><span class="dl">'</span><span class="s1">tag</span><span class="dl">'</span><span class="si">}</span><span class="p">&gt;</span>#<span class="si">{</span><span class="nx">tag</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
            <span class="p">))</span><span class="si">}</span>
          <span class="p">&lt;/</span><span class="nc">Tags</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nc">Button</span><span class="p">&gt;</span>êµ¬ë§¤<span class="p">&lt;/</span><span class="nc">Button</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nc">Button</span> <span class="na">orange</span> <span class="na">onClick</span><span class="p">=</span><span class="si">{</span><span class="nx">onCart</span><span class="si">}</span><span class="p">&gt;</span>
            ì¥ë°”êµ¬ë‹ˆ
          <span class="p">&lt;/</span><span class="nc">Button</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nc">ItemHeader</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nc">ItemHeaderWrapper</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nc">ItemHeaderBlock</span><span class="p">&gt;</span>
    <span class="si">{</span><span class="cm">/*&lt;Spacer2 /&gt;*/</span><span class="si">}</span>
    <span class="p">&lt;</span><span class="nc">ItemContentWrapper</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">ItemContentHeader</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>ìƒì„¸ ì„¤ëª…<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nc">ItemContentHeader</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nc">ItemContent</span> <span class="na">dangerouslySetInnerHTML</span><span class="p">=</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nc">ItemContentWrapper</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">);</span>
<span class="p">};</span>
</code></pre></div>    </div>
    <p>ê°€ì ¸ì˜¨ itemì •ë³´ë¥¼ í™œìš©í•´ì„œ ìƒì„¸í˜ì´ì§€ë¥¼ êµ¬í˜„í•œë‹¤.</p>
  </li>
</ul>

:ET